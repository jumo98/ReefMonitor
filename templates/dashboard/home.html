{% extends "dashboard/base.html" %}

{% load filters %}
{% load humanize %}

{% block title %} Home {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}


{% block content %}

<div class="container-fluid p-4 overflow-auto">
    {% for aquarium in aquariums %}
    {% if forloop.counter0|divisibleby:2 %}
    <div class="row">
        {% endif %}
        <div class="col">
            <div class="card shadow p-3 mb-3 bg-white rounded">
                <div class="card-body">
                    <h5 class="card-title"> {{ aquarium.name }} </h5>

                    <p class="card-text"> Last updated: {{ aquarium.update_date|naturaltime}} </p>

                    {% define aquarium.id as id %}

                    <hr>

                    <div class="mb-3">
                        <p class="card-text"> Current Values</p>
                        {% for measurement in latest|hash:id %}

                        {% if measurement == "salinity" %}
                        <span class="d-inline-block mb-2" data-toggle="tooltip"
                            title="{{ latest|hash:id|timestamp:measurement }}">
                            <button type="button" class="btn btn-primary">Salinity: {{ latest|hash:id|value:measurement }} </button>
                        </span>
                        {% endif %}

                        {% if measurement == "temperature" %}
                        <span class="d-inline-block mb-2" data-toggle="tooltip"
                            title="{{ latest|hash:id|timestamp:measurement }}">
                            <button type="button" class="btn btn-secondary">Temperature: {{ latest|hash:id|value:measurement }} </button>
                        </span>
                        {% endif %}

                        {% if measurement == "carbonate" %}
                        <span class="d-inline-block mb-2" data-toggle="tooltip"
                            title="{{ latest|hash:id|timestamp:measurement }}">
                            <button type="button" class="btn btn-success">Carbonate Hardness: {{ latest|hash:id|value:measurement }} </button>
                        </span>
                        {% endif %}

                        {% if measurement == "calcium" %}
                        <span class="d-inline-block mb-2" data-toggle="tooltip"
                            title="{{ latest|hash:id|timestamp:measurement }}">
                            <button type="button" class="btn btn-danger">Calcium: {{ latest|hash:id|value:measurement }} </button>
                        </span>
                        {% endif %}

                        {% if measurement == "magnesium" %}
                        <span class="d-inline-block mb-2" data-toggle="tooltip"
                            title="{{ latest|hash:id|timestamp:measurement }}">
                            <button type="button" class="btn btn-warning">Magnesium: {{ latest|hash:id|value:measurement }} </button>
                        </span>
                        {% endif %}

                        {% endfor %}


                    </div>

                    <hr>

                    <a href="/{{ aquarium.id }}/overview{{ query }}" class="btn btn-primary">Select</a>
                    <a href="/{{ aquarium.id }}/delete" class="btn btn-danger">Delete</a>
                </div>
            </div>
        </div>
        {% if forloop.counter0|divisibleby:2 == 0 %}
    </div>
    {% endif %}

    {% if forloop.last %}
    {% if forloop.counter0|divisibleby:2 == 0 %}
    <div class="row">
        {% endif %}
        <div class="col">
            <div class="card shadow p-3 mb-3 bg-white rounded">


                <div class="card-body">
                    <h5 class="card-title"> Add new aquarium </h5>

                    <form method="post">
                        {% csrf_token %}
                        {{ form }}
                        <button type="submit" class="btn btn-primary">Create</button>
                    </form>


                </div>
            </div>
        </div>

        {% if forloop.counter0|divisibleby:2 == 0 %}
    </div>
    {% endif %}
    {% endif %}

    {% empty %}
    No aquarium
    {% endfor %}


</div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}